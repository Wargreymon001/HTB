# ğŸ§  Enumeration Principles

## âœ… Conceptos clave
- **Enumeration** = recolecciÃ³n de informaciÃ³n mediante mÃ©todos **activos** (scans, interacciÃ³n directa) y **pasivos** (fuentes externas).  
- **OSINT** = solo pasivo, por lo tanto **no es enumeration**. Deben hacerse de forma **separada**.  
- La enumeration es un **proceso iterativo (loop)**:  
  1. Recolectamos informaciÃ³n inicial.  
  2. Analizamos lo hallado.  
  3. Ampliamos bÃºsqueda en base a nueva info.  
  4. Repetimos hasta tener un mapa completo.  
- El objetivo **no es explotar**, sino **mapear cÃ³mo llegar a la explotaciÃ³n**.  
- Importante: **no usar tÃ©cnicas ruidosas prematuras** (ejemplo: brute-force a SSH/RDP sin antes conocer defensas).  
- Una buena enumeration = **construcciÃ³n del mapa de la infraestructura** (dominios, servicios, defensas, dependencias).  

---

## âœ… Principios de Enumeration
1. **Hay mÃ¡s de lo que vemos**  
   - No quedarnos solo con lo obvio (ejemplo: si vemos SSH, no pensar solo en brute force â†’ podrÃ­a haber tÃºneles, certificados, roles).
   - Mirar desde distintos Ã¡ngulos (infraestructura externa, interna, dependencias en la nube, usuarios, proveedores).  

2. **Diferenciar lo visible y lo invisible**  
   - Visible = servicios abiertos, banners, versiones.  
   - No visible = firewalls, IDS, hosts detrÃ¡s de NAT, servicios internos expuestos solo en ciertas redes.  
   - Ambos aportan contexto: lo que no vemos puede indicar filtrado, segmentaciÃ³n, control de acceso.  

3. **Siempre hay mÃ¡s informaciÃ³n disponible**  
   - Si nos bloqueamos, significa que falta **comprensiÃ³n tÃ©cnica**, no â€œskills de hackingâ€.  
   - Siempre hay otra fuente o tÃ©cnica para ampliar (ejemplo: registros DNS, certificados, rutas histÃ³ricas, servicios auxiliares, correlaciones de infraestructura).  

---

## âœ… Preguntas guÃ­a durante Enumeration
- **Â¿QuÃ© podemos ver?** â†’ servicios, puertos, banners, rutas, usuarios, certificados.  
- **Â¿Por quÃ© lo vemos?** â†’ Â¿mal configurado? Â¿servicio pÃºblico necesario? Â¿exposiciÃ³n accidental?  
- **Â¿QuÃ© imagen crea lo que vemos?** â†’ Â¿infra de pruebas? Â¿entorno corporativo serio? Â¿servicios legacy?  
- **Â¿QuÃ© ganamos con esa info?** â†’ credenciales, rangos IP, rutas, estructura de red.  
- **Â¿CÃ³mo podemos usarlo?** â†’ para pivotar, planear ataques mÃ¡s adelante, buscar vulnerabilidades especÃ­ficas.  
- **Â¿QuÃ© no podemos ver?** â†’ hosts filtrados, servicios internos, rutas ocultas.  
- **Â¿Por quÃ© no lo vemos?** â†’ firewalls, WAF, segmentaciÃ³n, restricciones de ACL.  
- **Â¿QuÃ© imagen nos da lo invisible?** â†’ capa de defensa activa, separaciÃ³n de entornos, posible SOC/monitorizaciÃ³n.  

---

## ğŸ’» Comandos Ãºtiles (ejemplos bÃ¡sicos de enumeration)
```bash
# Nmap - escaneo inicial de puertos
nmap -sS -Pn -T4 -p- <IP>

# Nmap - detecciÃ³n de servicios y versiones
nmap -sV -sC -O <IP> -oN enumeration.txt

# Netcat - banner grabbing manual
nc -nv <IP> 80
GET / HTTP/1.1
Host: <IP>

# Enum4linux (SMB enumeration en Windows)
enum4linux -a <IP>

# SMBClient (conexiÃ³n manual a shares SMB)
smbclient -L //<IP> -U ""

# LDAP Enumeration (si 389 abierto)
ldapsearch -x -h <IP> -s base namingcontexts

# SNMP Enumeration (si 161 abierto)
snmpwalk -v2c -c public <IP>

# RPC Enumeration
rpcclient -U "" <IP>

# Web Enumeration con curl + whatweb
curl -I http://<IP>/
whatweb http://<IP>/

# Escaneo UDP bÃ¡sico
nmap -sU --top-ports 20 <IP>
```

---

## ğŸ“ Notas ampliadas
- Enumeration es **fase crÃ­tica**: la calidad del pentest depende de lo bien que mapemos.  
- El error comÃºn es **intentar explotar demasiado pronto**.  
- El pentester debe comportarse como un **investigador**: juntar piezas de un puzzle.  
- Lo **no visible** es tan importante como lo visible (ejemplo: puertos filtrados â†’ firewall activo).  
- La enumeration correcta implica:  
  1. Identificar servicios.  
  2. Clasificar riesgos.  
  3. Anotar dependencias tecnolÃ³gicas.  
  4. Construir hipÃ³tesis de ataque.  
- AnalogÃ­a del **cazador de tesoros**: primero estudia el mapa, analiza terreno, prepara herramientas â†’ luego actÃºa.  

---

## ğŸ“Œ Resumen clave para memorizar
- **Enumeration â‰  OSINT.** Enumeration = activo + pasivo.  
- **Iterativo**: cada hallazgo abre nueva vÃ­a de investigaciÃ³n.  
- Principios:  
  1. Hay mÃ¡s de lo que se ve.  
  2. Diferenciar visible/invisible.  
  3. Siempre se puede encontrar mÃ¡s info.  
- Hazte siempre las **8 preguntas guÃ­a**.  
- Evita **ruido prematuro** (brute force, fuzzing agresivo) â†’ pueden bloquearte.  
- El valor de enumeration = **mapa completo** de la infraestructura.
