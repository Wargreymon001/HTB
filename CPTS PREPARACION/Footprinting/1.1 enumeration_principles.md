# 🧠 Enumeration Principles

## ✅ Conceptos clave
- **Enumeration** = recolección de información mediante métodos **activos** (scans, interacción directa) y **pasivos** (fuentes externas).  
- **OSINT** = solo pasivo, por lo tanto **no es enumeration**. Deben hacerse de forma **separada**.  
- La enumeration es un **proceso iterativo (loop)**:  
  1. Recolectamos información inicial.  
  2. Analizamos lo hallado.  
  3. Ampliamos búsqueda en base a nueva info.  
  4. Repetimos hasta tener un mapa completo.  
- El objetivo **no es explotar**, sino **mapear cómo llegar a la explotación**.  
- Importante: **no usar técnicas ruidosas prematuras** (ejemplo: brute-force a SSH/RDP sin antes conocer defensas).  
- Una buena enumeration = **construcción del mapa de la infraestructura** (dominios, servicios, defensas, dependencias).  

---

## ✅ Principios de Enumeration
1. **Hay más de lo que vemos**  
   - No quedarnos solo con lo obvio (ejemplo: si vemos SSH, no pensar solo en brute force → podría haber túneles, certificados, roles).
   - Mirar desde distintos ángulos (infraestructura externa, interna, dependencias en la nube, usuarios, proveedores).  

2. **Diferenciar lo visible y lo invisible**  
   - Visible = servicios abiertos, banners, versiones.  
   - No visible = firewalls, IDS, hosts detrás de NAT, servicios internos expuestos solo en ciertas redes.  
   - Ambos aportan contexto: lo que no vemos puede indicar filtrado, segmentación, control de acceso.  

3. **Siempre hay más información disponible**  
   - Si nos bloqueamos, significa que falta **comprensión técnica**, no “skills de hacking”.  
   - Siempre hay otra fuente o técnica para ampliar (ejemplo: registros DNS, certificados, rutas históricas, servicios auxiliares, correlaciones de infraestructura).  

---

## ✅ Preguntas guía durante Enumeration
- **¿Qué podemos ver?** → servicios, puertos, banners, rutas, usuarios, certificados.  
- **¿Por qué lo vemos?** → ¿mal configurado? ¿servicio público necesario? ¿exposición accidental?  
- **¿Qué imagen crea lo que vemos?** → ¿infra de pruebas? ¿entorno corporativo serio? ¿servicios legacy?  
- **¿Qué ganamos con esa info?** → credenciales, rangos IP, rutas, estructura de red.  
- **¿Cómo podemos usarlo?** → para pivotar, planear ataques más adelante, buscar vulnerabilidades específicas.  
- **¿Qué no podemos ver?** → hosts filtrados, servicios internos, rutas ocultas.  
- **¿Por qué no lo vemos?** → firewalls, WAF, segmentación, restricciones de ACL.  
- **¿Qué imagen nos da lo invisible?** → capa de defensa activa, separación de entornos, posible SOC/monitorización.  

---

## 💻 Comandos útiles (ejemplos básicos de enumeration)
```bash
# Nmap - escaneo inicial de puertos
nmap -sS -Pn -T4 -p- <IP>

# Nmap - detección de servicios y versiones
nmap -sV -sC -O <IP> -oN enumeration.txt

# Netcat - banner grabbing manual
nc -nv <IP> 80
GET / HTTP/1.1
Host: <IP>

# Enum4linux (SMB enumeration en Windows)
enum4linux -a <IP>

# SMBClient (conexión manual a shares SMB)
smbclient -L //<IP> -U ""

# LDAP Enumeration (si 389 abierto)
ldapsearch -x -h <IP> -s base namingcontexts

# SNMP Enumeration (si 161 abierto)
snmpwalk -v2c -c public <IP>

# RPC Enumeration
rpcclient -U "" <IP>

# Web Enumeration con curl + whatweb
curl -I http://<IP>/
whatweb http://<IP>/

# Escaneo UDP básico
nmap -sU --top-ports 20 <IP>
```

---

## 📝 Notas ampliadas
- Enumeration es **fase crítica**: la calidad del pentest depende de lo bien que mapemos.  
- El error común es **intentar explotar demasiado pronto**.  
- El pentester debe comportarse como un **investigador**: juntar piezas de un puzzle.  
- Lo **no visible** es tan importante como lo visible (ejemplo: puertos filtrados → firewall activo).  
- La enumeration correcta implica:  
  1. Identificar servicios.  
  2. Clasificar riesgos.  
  3. Anotar dependencias tecnológicas.  
  4. Construir hipótesis de ataque.  
- Analogía del **cazador de tesoros**: primero estudia el mapa, analiza terreno, prepara herramientas → luego actúa.  

---

## 📌 Resumen clave para memorizar
- **Enumeration ≠ OSINT.** Enumeration = activo + pasivo.  
- **Iterativo**: cada hallazgo abre nueva vía de investigación.  
- Principios:  
  1. Hay más de lo que se ve.  
  2. Diferenciar visible/invisible.  
  3. Siempre se puede encontrar más info.  
- Hazte siempre las **8 preguntas guía**.  
- Evita **ruido prematuro** (brute force, fuzzing agresivo) → pueden bloquearte.  
- El valor de enumeration = **mapa completo** de la infraestructura.
