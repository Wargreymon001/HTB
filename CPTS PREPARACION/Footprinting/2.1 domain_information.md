# ðŸ§  Domain Information

## âœ… Conceptos clave
- El dominio de una empresa es una **fuente crÃ­tica de informaciÃ³n** en pentesting.  
- Los registros DNS pueden revelar: IPs, servidores de correo, proveedores externos, configuraciones de seguridad, etc.  
- Entender esta informaciÃ³n permite **mapear la infraestructura** y detectar vectores de ataque.  

---

## ðŸ”Ž Reconocimiento inicial
Ejemplo de bÃºsqueda de informaciÃ³n de un host expuesto:

```bash
# Shodan muestra puertos abiertos y versiones de servicios
10.129.27.22
  Ports:
  25/tcp (SMTP)
  53/tcp + udp (DNS)
  80/tcp, 81/tcp (Apache HTTPD)
  110/tcp (POP3)
  111/tcp (RPC)
  443/tcp (Apache HTTPS)
  444/tcp (?)

10.129.27.33
  Ports:
  22/tcp (OpenSSH 7.6p1)
  80/tcp (nginx)
  443/tcp (nginx HTTPS)
```
âž¡ï¸ Esto nos da servicios visibles y versiones potencialmente vulnerables.

---

## ðŸŒ DNS Records (bÃºsqueda con dig)
```bash
dig any inlanefreight.com
```

Salida tÃ­pica:
```
inlanefreight.com. 300  IN  A   10.129.27.33
inlanefreight.com. 300  IN  A   10.129.29.250
inlanefreight.com. 3600 IN  MX  1 aspmx.l.google.com.
inlanefreight.com. 21600 IN NS  ns.inwx.net.
inlanefreight.com. 3600 IN TXT "google-site-verification=..."
inlanefreight.com. 21600 IN SOA ns.inwx.net. hostmaster.inwx.net.
```

---

## ðŸ“‘ Tipos de registros y utilidad
- **A record** â†’ IP asociada al dominio/subdominio. Ej: `10.129.27.33`.  
- **MX record** â†’ Servidores de correo. AquÃ­ gestionados por Google.  
- **NS record** â†’ Servidores de nombres (ej: `inwx.net`). Identifican al proveedor de hosting.  
- **TXT record** â†’ Contienen claves de verificaciÃ³n (Google, Microsoft, Atlassian, etc.), tambiÃ©n configuraciones de seguridad:  
  - **SPF** â†’ Controla quÃ© servidores pueden enviar correos.  
  - **DKIM** â†’ Firma criptogrÃ¡fica para validar origen.  
  - **DMARC** â†’ PolÃ­tica de verificaciÃ³n de correos.  
- **SOA record** â†’ Datos administrativos del dominio.  

---

## ðŸ¢ Proveedores externos detectados
A travÃ©s de los TXT y MX vemos que la empresa usa servicios de terceros:

| Proveedor   | Uso principal |
|-------------|---------------|
| Atlassian   | GestiÃ³n de proyectos / software |
| Google Gmail| Correo corporativo |
| LogMeIn     | Acceso remoto y administraciÃ³n |
| Mailgun     | APIs y relays de correo |
| Outlook / O365 | GestiÃ³n documental, OneDrive, Azure Blob |
| INWX        | Hosting / registro de dominios |

âž¡ï¸ Cada uno de estos puede convertirse en un vector de ataque (phishing, password reuse, vulnerabilidades en APIs, etc.).  

---

## ðŸ’¡ Ejemplos prÃ¡cticos
- **Identificar IPs adicionales** en registros `A`: mÃ¡s hosts para escanear.  
- **Analizar registros MX** â†’ Saber si el correo estÃ¡ en Google / Microsoft.  
- **TXT SPF** â†’ Ver quÃ© servicios tienen permiso para enviar correos â†’ posible spoofing si mal configurado.  
- **DetecciÃ³n de SaaS externos** (Atlassian, LogMeIn, etc.) â†’ posibles ataques a la nube.  

---

## ðŸ’» Comandos Ãºtiles
```bash
# Consultar todos los registros DNS de un dominio
dig any dominio.com

# Consultar solo los registros A
dig A dominio.com

# Consultar servidores de correo
dig MX dominio.com

# Consultar servidores de nombres
dig NS dominio.com

# VerificaciÃ³n con nslookup (modo interactivo)
nslookup
> server 8.8.8.8
> set type=any
> dominio.com

# Herramienta rÃ¡pida
host -a dominio.com
```

---

## ðŸ“Œ Resumen clave
- Los **DNS records** revelan infraestructura y servicios de terceros.  
- Registros importantes: **A, MX, NS, TXT, SOA**.  
- **TXT** puede mostrar verificaciones de Google, Microsoft, Atlassian, LogMeIn, etc.  
- Analizar proveedores externos = mÃ¡s vectores de ataque.  
- **Cheat sheet de comandos**: `dig`, `host`, `nslookup`.  
