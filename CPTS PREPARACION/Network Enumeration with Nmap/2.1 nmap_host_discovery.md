# ðŸ§  Nmap: Descubrimiento de Hosts

## âœ… Conceptos clave
- El primer paso en una auditorÃ­a/red interna es detectar quÃ© hosts estÃ¡n activos.
- Nmap permite descubrir hosts vivos con diversas tÃ©cnicas (ICMP, ARP, etc.).
- Siempre guardar resultados (-oA) para comparaciÃ³n o documentaciÃ³n.
- El mÃ©todo mÃ¡s comÃºn es el escaneo ICMP Echo Request (-PE), pero puede verse bloqueado por firewalls.

## ðŸ§ª Modos de escaneo

### ðŸ” Rango de red completo
```bash
sudo nmap 10.129.2.0/24 -sn -oA tnet | grep for | cut -d" " -f5
```
- `-sn`: Desactiva escaneo de puertos, solo ping
- `-oA`: Guarda en todos los formatos (`tnet.nmap`, `tnet.gnmap`, `tnet.xml`)

### ðŸ“„ Escaneo desde lista de IPs
```bash
sudo nmap -sn -oA tnet -iL hosts.lst | grep for | cut -d" " -f5
```
- `-iL`: Lee las IPs desde un archivo

### âž• IPs mÃºltiples
```bash
sudo nmap -sn -oA tnet 10.129.2.18 10.129.2.19 10.129.2.20
sudo nmap -sn -oA tnet 10.129.2.18-20
```

### ðŸŽ¯ IP Ãºnica
```bash
sudo nmap 10.129.2.18 -sn -oA host
```

## âš™ï¸ Opciones Ãºtiles
```bash
-PE               # Usar ICMP Echo Request (ping)
--packet-trace    # Mostrar todos los paquetes enviados/recibidos
--reason          # Mostrar por quÃ© Nmap considera que el host estÃ¡ vivo
--disable-arp-ping # Desactiva ARP y fuerza uso de ICMP
```

## ðŸ”¬ Ejemplo: mostrar paquetes ICMP explÃ­citamente
```bash
sudo nmap 10.129.2.18 -sn -oA host -PE --packet-trace --disable-arp-ping
```

> Nmap prioriza ARP en redes locales. Para obligar ICMP, usa `--disable-arp-ping`.
> Usa `--reason` para ver el motivo de detecciÃ³n de host vivo.

## ðŸ“š Recurso adicional
- [Host Discovery Strategies (nmap.org)](https://nmap.org/book/host-discovery-strategies.html)
